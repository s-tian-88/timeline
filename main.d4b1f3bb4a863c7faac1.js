/*! For license information please see main.d4b1f3bb4a863c7faac1.js.LICENSE.txt */
(()=>{"use strict";var e={809:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var c=0;c<this.length;c++){var s=this[c][0];null!=s&&(a[s]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);r&&a[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),n&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=n):l[2]=n),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},204:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},275:e=>{e.exports=function(e){return e[1]}},938:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(275),o=n.n(r),i=n(809),a=n.n(i),c=n(204),s=n.n(c),u=new URL(n(5),n.b),l=new URL(n(940),n.b),d=new URL(n(164),n.b),f=new URL(n(669),n.b),p=a()(o()),h=s()(u),v=s()(l),y=s()(d),b=s()(f);p.push([e.id,`.common-message-widget {\n    width: 100%;\n    height: 100%;\n\n    display: flex;\n    justify-content: space-between;\n}\n\n.common-message-widget-info {\n\n    pointer-events: none;\n\n    font-weight: bold;\n    font-size: 24px;\n    width: 20%;\n    padding: 10px 5px;\n    text-align: center;\n\n}\n\n.common-message-widget-main {\n    width: 60%;\n    display: flex;\n\n    align-items: flex-end;\n    justify-content: space-between;\n\n}\n\n.common-widget-btns {\n\n    margin-right: 10px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n\n}\n\n.common-widget-btn {\n\n    width: 30px;\n    height: 30px;\n    margin: 0 20px;\n\n    background-position: center;\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-color: inherit;\n\n    border: none;\n    cursor: pointer;\n\n    transition: transform 500ms;\n}\n\n.disabled-btn {\n\n    opacity: 0.5;\n    pointer-events: none;\n\n}\n\n.common-widget-btn:hover {\n    transform: scale(1.3, 1.3);\n}\n\n#send-message-btn {\n\n    background-image: url(${h})\n\n}\n\n#text-message-btn {\n\n    background-image: url(${v})\n\n}\n\n\n#audio-message-btn {\n\n    background-image: url(${y})\n\n}\n\n#video-message-btn {\n\n    background-image: url(${b})\n\n}\n\n\n\n`,""]);const m=p},78:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(275),o=n.n(r),i=n(809),a=n.n(i)()(o());a.push([e.id,".coords-popup-widget {\n\n    display: none;\n\n    margin: -60vh auto;\n    width: 20%;\n    height: 250px;\n    padding: 10px;\n    border-radius: 10px;\n    background-color: #F1F1F1;\n    transform-style: preserve-3d;\n\n}\n\n.coords-popup-widget::before {\n    content: '';\n    position: absolute;\n    width: 100vw;\n    height: 100vh;\n    top: -33vh;\n    left: -39.5vw;\n    background-color: #000000;\n    transform: translateZ(-1px);\n    opacity: 0.6;\n}\n\n#coords-popup-form {\n    display: flex;\n    flex-direction: column;\n}\n\n#coords-popup-label {\n    font-family: Verdana, sans-serif;\n}\n\n#coords-popup-input {\n    border: none;\n    margin: 10px 0;\n    font-size: 24px;\n    border-radius: 10px;\n    padding: 0 10px;\n}\n\n#coords-popup-btn {\n    border-radius: 10px;\n    margin: 10px 0;\n    height: 30px;\n}\n",""]);const c=a},94:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(275),o=n.n(r),i=n(809),a=n.n(i)()(o());a.push([e.id,".main-container {\n\n    position: relative;\n\n    width: 60vw;\n    height: 93vh;\n    background-color: #EFEFEF;\n    margin: 0 auto;\n    border-radius: 10px;\n\n}\n\n.cards-container {\n\n    width: 100%;\n    height: 100%;\n\n    padding: 10px;\n    border: 4px solid #EFEFEF;\n    border-radius: 10px;\n    box-sizing: border-box;\n\n    background-color: #107ABB;\n\n    overflow: auto;\n}\n\n.widget-container {\n    background-color: #107ABB;\n    width: 100%;\n    height: 50px;\n    border: 4px solid #EFEFEF;\n    border-top: none;\n    border-radius: 10px;\n    box-sizing: border-box;\n}\n",""]);const c=a},922:(e,t,n)=>{n.d(t,{A:()=>y});var r=n(275),o=n.n(r),i=n(809),a=n.n(i),c=n(204),s=n.n(c),u=new URL(n(464),n.b),l=new URL(n(221),n.b),d=new URL(n(730),n.b),f=a()(o()),p=s()(u),h=s()(l),v=s()(d);f.push([e.id,`.message-card {\n    padding: 5px;\n    border-bottom: 2px solid #242933;\n\n    transition: opacity 500ms;\n}\n\n.message-video {\n    width: 320px;\n    height: 240px;\n\n    border-radius: 25px;\n}\n\n.message-card-content {\n    padding: 10px 0;\n    white-space: pre;\n}\n\n.message-card-footer {\n    display: flex;\n    justify-content: space-between;\n}\n\n.message-card-footer-content {\n}\n\n.message-card-footer-btns {\n    width: 10%;\n    min-width: 80px;\n    display: flex;\n    justify-content: space-between;\n}\n\n.message-card-btn {\n    width: 20px;\n    height: 20px;\n\n    background-color: inherit;\n    border: none;\n\n    background-size: contain;\n    background-repeat: no-repeat;\n    background-position: center;\n\n    cursor: pointer;\n\n}\n\n.delete {\n    background-image: url(${p});\n}\n\n.like {\n    background-image: url(${h});\n}\n\n.mark {\n    background-image: url(${v});\n}\n`,""]);const y=f},366:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(275),o=n.n(r),i=n(809),a=n.n(i)()(o());a.push([e.id,".text-message-widget {\n\n    display: none;\n    background-color: inherit;\n    margin-bottom: 6px;\n\n    width: 100%;\n    border-radius: 5px;\n\n    opacity: 0;\n    transition: opacity 1000ms;\n\n    align-items: flex-end;\n    justify-content: space-between;\n}\n\n.text-message-textarea {\n    font-size: 18px;\n    padding-left: 5px;\n    overflow: hidden;\n    width: 100%;\n    border-radius: 5px;\n    resize: none;\n}\n\n.enable-widget {\n    display: flex !important;\n}\n\n.text-message-textarea:focus {\n    outline: none;\n    \n}\n",""]);const c=a},680:(e,t,n)=>{n.d(t,{A:()=>S});var r=n(275),o=n.n(r),i=n(809),a=n.n(i),c=n(204),s=n.n(c),u=new URL(n(679),n.b),l=new URL(n(426),n.b),d=new URL(n(269),n.b),f=new URL(n(100),n.b),p=new URL(n(368),n.b),h=new URL(n(731),n.b),v=a()(o()),y=s()(u),b=s()(l),m=s()(d),g=s()(f),w=s()(p),x=s()(h);v.push([e.id,`.video-message-widget {\n\n    display: none;\n    width: 60%;\n\n    margin-left: 250px;\n\n    opacity: 0;\n\n    transition: opacity 1000ms;\n\n    background-color: #107ABB;\n    box-shadow: 1px -20px 20px 20px #107ABB;\n}\n\n.video-container {\n\n}\n\nvideo#gum, video#recorder {\n    width: 100%;\n    border-radius: 25px;\n}\n\n.video-message-widget-btns {\n\n    display: flex;\n    flex-direction: column-reverse;\n\n}\n\n.video-message-widget-btn {\n\n    height: 30px;\n    width: 30px;\n\n    background-color: inherit;\n    border: none;\n    margin: 8px;\n\n    cursor: pointer;\n\n}\n\nbutton#start {\n    background-image: url(${y});\n    \n    &:hover {\n        background-image: url(${b});\n    }\n}\nbutton#stop {\n\n    display: none;\n\n    background-image: url(${m});\n    &:hover {\n        background-image: url(${g});\n    }\n}\nbutton#reset {\n    background-image: url(${w});\n    &:hover {\n        background-image: url(${x});\n    }\n}\n`,""]);const S=v},619:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(275),o=n.n(r),i=n(809),a=n.n(i)()(o());a.push([e.id,"body {\n\n    position: relative;\n    background-color: #107ABB;\n    margin: 0;\n\n    height: 100vh;\n    width: 100vw;\n\n}\n",""]);const c=a},656:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],c=0;c<e.length;c++){var s=e[c],u=r.base?s[0]+r.base:s[0],l=i[u]||0,d="".concat(u," ").concat(l);i[u]=l+1;var f=n(d),p={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==f)t[f].references++,t[f].updater(p);else{var h=o(p,r);r.byIndex=c,t.splice(c,0,{identifier:d,updater:h,references:1})}a.push(d)}return a}function o(e,t){var n=t.domAPI(t);n.update(e);return function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var c=n(i[a]);t[c].references--}for(var s=r(e,o),u=0;u<i.length;u++){var l=n(i[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=s}}},179:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},460:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},384:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},969:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},305:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5:(e,t,n)=>{e.exports=n.p+"03587a85b777d358fd32.svg"},940:(e,t,n)=>{e.exports=n.p+"53c294dda5e4565eec1d.svg"},164:(e,t,n)=>{e.exports=n.p+"3a5cf5d722ded3260724.svg"},669:(e,t,n)=>{e.exports=n.p+"098c7da6528eecba339a.svg"},730:(e,t,n)=>{e.exports=n.p+"7b6f816dcfc67238d129.svg"},221:(e,t,n)=>{e.exports=n.p+"a33fc3f84d17ebcf1c68.svg"},464:(e,t,n)=>{e.exports=n.p+"2e1c9d6e4bf9ec53e064.svg"},731:(e,t,n)=>{e.exports=n.p+"47fc3415a50ba8ce4801.svg"},679:(e,t,n)=>{e.exports=n.p+"7697bc3ee050ee152ec8.svg"},426:(e,t,n)=>{e.exports=n.p+"ceb5bf07b4d00930c2ff.svg"},269:(e,t,n)=>{e.exports=n.p+"121dc775157a8984dd3e.svg"},100:(e,t,n)=>{e.exports=n.p+"7248fb02eef882b3f286.svg"},368:(e,t,n)=>{e.exports=n.p+"4530ef1c8bc1d86702e2.svg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{var e=n(656),t=n.n(e),r=n(969),o=n.n(r),i=n(179),a=n.n(i),c=n(384),s=n.n(c),u=n(460),l=n.n(u),d=n(305),f=n.n(d),p=n(619),h={};h.styleTagTransform=f(),h.setAttributes=s(),h.insert=a().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=l();t()(p.A,h);p.A&&p.A.locals&&p.A.locals;var v=n(94),y={};y.styleTagTransform=f(),y.setAttributes=s(),y.insert=a().bind(null,"head"),y.domAPI=o(),y.insertStyleElement=l();t()(v.A,y);v.A&&v.A.locals&&v.A.locals;function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}var w=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof HTMLElement))throw new Error("".concat(t," is not HTMLElement"));this.container=t},(t=[{key:"render",value:function(){this.renderMainContainerElement()}},{key:"renderMainContainerElement",value:function(){var e=document.createElement("div");e.classList.add("main-container"),e.innerHTML='\n  <div class="cards-container"></div>\n  <div class="widget-container"></div>\n  ',this.container.appendChild(e)}}])&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var x=n(938),S={};S.styleTagTransform=f(),S.setAttributes=s(),S.insert=a().bind(null,"head"),S.domAPI=o(),S.insertStyleElement=l();t()(x.A,S);x.A&&x.A.locals&&x.A.locals;function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function A(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}var L=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof HTMLElement))throw new Error("".concat(t," is not HTMLElement"));this.container=t},(t=[{key:"render",value:function(){this.renderCommonWidgetElement()}},{key:"renderCommonWidgetElement",value:function(){var e=document.createElement("div");e.classList.add("common-message-widget"),e.innerHTML='\n  <div class="common-message-widget-info"></div>\n  <div class="common-message-widget-main"></div>\n  \n  <div class="common-widget-btns">\n    <button id="send-message-btn" class="common-widget-btn disabled-btn"></button>\n    <button id="text-message-btn" class="common-widget-btn"></button>\n    <button id="audio-message-btn" class="common-widget-btn"></button>\n    <button id="video-message-btn" class="common-widget-btn"></button>\n  </div>\n  ',this.container.appendChild(e),e.querySelector("button#send-message-btn")}}])&&k(e.prototype,t),n&&k(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var T=n(366),O={};O.styleTagTransform=f(),O.setAttributes=s(),O.insert=a().bind(null,"head"),O.domAPI=o(),O.insertStyleElement=l();t()(T.A,O);T.A&&T.A.locals&&T.A.locals;function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P(r.key),r)}}function P(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}var _=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof HTMLElement))throw new Error("".concat(t," is not HTMLElement"));this.container=t,document.querySelector("button#text-message-btn").addEventListener("click",this.textMessageBtnOnClick),this.textMessageTextareaOnInput=this.textMessageTextareaOnInput.bind(this)},(t=[{key:"render",value:function(){this.renderMessageWidgetElement()}},{key:"renderMessageWidgetElement",value:function(){var e=document.createElement("div");e.classList.add("text-message-widget"),e.innerHTML='\n  <textarea class="text-message-textarea" rows="1" placeholder="Type your text message here..." reuired></textarea>\n  ',this.container.appendChild(e),e.querySelector(".text-message-textarea").addEventListener("input",this.textMessageTextareaOnInput)}},{key:"textMessageBtnOnClick",value:function(e){var t=document.querySelector("video#gum").srcObject;t&&t.getTracks().forEach((function(e){e.stop()}));var n=document.querySelector(".enable-widget");n&&(n.style.opacity="0",n.classList.remove("enable-widget"));var r=document.querySelector(".text-message-widget");r.classList.add("enable-widget"),document.querySelector(".common-message-widget-info").textContent="Text",setTimeout((function(){r.style.opacity="1"})),document.querySelectorAll(".common-widget-btn").forEach((function(e){e.classList.contains("disabled-btn")&&e.classList.remove("disabled-btn")})),e.target.classList.add("disabled-btn"),localStorage.setItem("messageMode","text")}},{key:"textMessageTextareaOnInput",value:function(e){var t=e.target;t.style.height="auto",t.style.height="".concat(t.scrollHeight,"px")}}])&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var M=n(922),I={};I.styleTagTransform=f(),I.setAttributes=s(),I.insert=a().bind(null,"head"),I.domAPI=o(),I.insertStyleElement=l();t()(M.A,I);M.A&&M.A.locals&&M.A.locals;function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function F(e){var t=function(e,t){if("object"!=U(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=U(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==U(t)?t:t+""}var $=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof HTMLElement))throw new Error("".concat(t," is not HTMLelement"));this.container=t,this.sendMessageBtnOnClick=this.sendMessageBtnOnClick.bind(this),this.deleteCardBtnOnClick=this.deleteCardBtnOnClick.bind(this),this.coordsPopupBtnOnClick=this.coordsPopupBtnOnClick.bind(this),document.querySelector("button#send-message-btn").addEventListener("click",this.sendMessageBtnOnClick),document.querySelector("button#coords-popup-btn").addEventListener("click",this.coordsPopupBtnOnClick)},(t=[{key:"render",value:function(){}},{key:"renderMessageCardElement",value:function(e,t){var n=document.createElement("div");n.classList.add("message-card");var r,o="[".concat(t.latitude,", ").concat(t.longitude,"]"),i=(r=Date.now(),new Date(r));return n.innerHTML=function(e,t,n){return'\n  <div class="message-card-header">'.concat(e,'</div>\n  <div class="message-card-content"></div>\n  <div class="message-card-footer">\n    <div class="message-card-footer-content">\n      <span>Date: ').concat(n,"</span>\n      <span>Position: ").concat(t,'</span>\n    </div>\n    <div class="message-card-footer-btns">\n      <button class="message-card-btn delete"></button>\n      <button class="message-card-btn like"></button>\n      <button class="message-card-btn mark"></button>\n    </div>\n  </div>\n  ')}(e,o,i),this.container.insertBefore(n,this.container.firstChild),n.querySelector(".delete").addEventListener("click",this.deleteCardBtnOnClick),n}},{key:"sendMessageBtnOnClick",value:function(){var e=localStorage.getItem("messageMode");if(("text"!==e||document.querySelector(".text-message-textarea").value)&&("video"!==e||"none"!==document.querySelector("video#recorder").style.display))if(localStorage.getItem("coordinates")){var t=JSON.parse(localStorage.getItem("coordinates"));this.sendMessage(t)}else document.querySelector(".coords-popup-widget").style.display="flex"}},{key:"coordsPopupBtnOnClick",value:function(e){e.preventDefault();var t=R(document.querySelector("input#coords-popup-input").value.replaceAll(" ","").split(","),2),n={latitude:t[0],longitude:t[1]};e.target.closest(".coords-popup-widget").style.display="none",this.sendMessage(n)}},{key:"sendMessage",value:function(e){var t=localStorage.getItem("messageMode");switch(t){case"text":var n=document.querySelector(".text-message-textarea"),r=n.value;this.renderMessageCardElement(t.toUpperCase(),e);var o=document.querySelector(".message-card-content");o.textContent=r,o.style.fontWeight="bold",n.value="",n.style.height="auto";break;case"video":var i=document.querySelector("video#recorder"),a=this.renderMessageCardElement(t.toUpperCase(),e).querySelector(".message-card-content"),c=document.createElement("video");c.id="card-video",c.classList.add("message-video"),c.setAttribute("controls",!0),c.src=i.src,a.appendChild(c)}}},{key:"deleteCardBtnOnClick",value:function(e){var t=e.target.closest(".message-card");t.style.opacity="0",setTimeout((function(){t.remove()}),500)}}])&&H(e.prototype,t),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),z=function(e,t){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},z(e,t)};function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}z(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function D(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{s(r.next(e))}catch(e){i(e)}}function c(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((r=r.apply(e,t||[])).next())}))}function G(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(s){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){a=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){a.label=c[1];break}if(6===c[0]&&a.label<o[1]){a.label=o[1],o=c;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(c);break}o[2]&&a.ops.pop(),a.trys.pop();continue}c=t.call(e,a)}catch(e){c=[6,e],r=0}finally{n=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,s])}}}Object.create;function W(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function V(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function J(e){return this instanceof J?(this.v=e,this):new J(e)}function Q(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||c(e,t)}))})}function c(e,t){try{(n=o[e](t)).value instanceof J?Promise.resolve(n.value.v).then(s,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function s(e){c("next",e)}function u(e){c("throw",e)}function l(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Z(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=W(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise((function(r,o){(function(e,t,n,r){Promise.resolve(r).then((function(t){e({value:t,done:n})}),t)})(r,o,(t=e[n](t)).done,t.value)}))}}}Object.create;"function"==typeof SuppressedError&&SuppressedError;var K=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function ee(e){return"function"==typeof e}var te,ne=((te=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),te.prototype.constructor=te,te);function re(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var oe=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,r,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var a=W(i),c=a.next();!c.done;c=a.next()){c.value.remove(this)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}else i.remove(this);var s=this.initialTeardown;if(ee(s))try{s()}catch(e){o=e instanceof ne?e.errors:[e]}var u=this._finalizers;if(u){this._finalizers=null;try{for(var l=W(u),d=l.next();!d.done;d=l.next()){var f=d.value;try{ae(f)}catch(e){o=null!=o?o:[],e instanceof ne?o=V(V([],Y(o)),Y(e.errors)):o.push(e)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}}if(o)throw new ne(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)ae(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&re(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&re(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();oe.EMPTY;function ie(e){return e instanceof oe||e&&"closed"in e&&ee(e.remove)&&ee(e.add)&&ee(e.unsubscribe)}function ae(e){ee(e)?e():e.unsubscribe()}var ce={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},se={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=se.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,V([e,t],Y(n))):setTimeout.apply(void 0,V([e,t],Y(n)))},clearTimeout:function(e){var t=se.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ue(e){se.setTimeout((function(){var t=ce.onUnhandledError;if(!t)throw e;t(e)}))}function le(){}var de=fe("C",void 0,void 0);function fe(e,t,n){return{kind:e,value:t,error:n}}var pe=null;var he=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,ie(t)&&t.add(n)):n.destination=xe,n}return X(t,e),t.create=function(e,t,n){return new me(e,t,n)},t.prototype.next=function(e){this.isStopped?we(function(e){return fe("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?we(fe("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?we(de,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(oe),ve=Function.prototype.bind;function ye(e,t){return ve.call(e,t)}var be=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){ge(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){ge(e)}else ge(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){ge(e)}},e}(),me=function(e){function t(t,n,r){var o,i,a=e.call(this)||this;ee(t)||!t?o={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:a&&ce.useDeprecatedNextContext?((i=Object.create(t)).unsubscribe=function(){return a.unsubscribe()},o={next:t.next&&ye(t.next,i),error:t.error&&ye(t.error,i),complete:t.complete&&ye(t.complete,i)}):o=t;return a.destination=new be(o),a}return X(t,e),t}(he);function ge(e){var t;ce.useDeprecatedSynchronousErrorHandling?(t=e,ce.useDeprecatedSynchronousErrorHandling&&pe&&(pe.errorThrown=!0,pe.error=t)):ue(e)}function we(e,t){var n=ce.onStoppedNotification;n&&se.setTimeout((function(){return n(e,t)}))}var xe={closed:!0,next:le,error:function(e){throw e},complete:le},Se="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ee(e){return e}function ke(e){return 0===e.length?Ee:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Ae=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r,o=this,i=(r=e)&&r instanceof he||function(e){return e&&ee(e.next)&&ee(e.error)&&ee(e.complete)}(r)&&ie(r)?e:new me(e,t,n);return function(e){if(ce.useDeprecatedSynchronousErrorHandling){var t=!pe;if(t&&(pe={errorThrown:!1,error:null}),e(),t){var n=pe,r=n.errorThrown,o=n.error;if(pe=null,r)throw o}}else e()}((function(){var e=o,t=e.operator,n=e.source;i.add(t?t.call(i,n):n?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=Le(t))((function(t,r){var o=new me({next:function(t){try{e(t)}catch(e){r(e),o.unsubscribe()}},error:r,complete:t});n.subscribe(o)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[Se]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ke(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=Le(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function Le(e){var t;return null!==(t=null!=e?e:ce.Promise)&&void 0!==t?t:Promise}var Te="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function Oe(e){if(e instanceof Ae)return e;if(null!=e){if(function(e){return ee(e[Se])}(e))return i=e,new Ae((function(e){var t=i[Se]();if(ee(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")}));if(K(e))return o=e,new Ae((function(e){for(var t=0;t<o.length&&!e.closed;t++)e.next(o[t]);e.complete()}));if(ee(null==(r=e)?void 0:r.then))return n=e,new Ae((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,ue)}));if(function(e){return Symbol.asyncIterator&&ee(null==e?void 0:e[Symbol.asyncIterator])}(e))return je(e);if(function(e){return ee(null==e?void 0:e[Te])}(e))return t=e,new Ae((function(e){var n,r;try{for(var o=W(t),i=o.next();!i.done;i=o.next()){var a=i.value;if(e.next(a),e.closed)return}}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return ee(null==e?void 0:e.getReader)}(e))return je(function(e){return Q(this,arguments,(function(){var t,n,r;return G(this,(function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,J(t.read())];case 3:return n=o.sent(),r=n.value,n.done?[4,J(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,J(r)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,r,o,i;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function je(e){return new Ae((function(t){(function(e,t){var n,r,o,i;return D(this,void 0,void 0,(function(){var a,c;return G(this,(function(s){switch(s.label){case 0:s.trys.push([0,5,6,11]),n=Z(e),s.label=1;case 1:return[4,n.next()];case 2:if((r=s.sent()).done)return[3,4];if(a=r.value,t.next(a),t.closed)return[2];s.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return c=s.sent(),o={error:c},[3,11];case 6:return s.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:s.sent(),s.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function Ce(e){return function(t){if(function(e){return ee(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Pe(e,t,n,r,o){return new _e(e,t,n,r,o)}var _e=function(e){function t(t,n,r,o,i,a){var c=e.call(this,t)||this;return c.onFinalize=i,c.shouldUnsubscribe=a,c._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,c._error=o?function(e){try{o(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,c}return X(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(he);function Me(e,t){return Ce((function(n,r){var o=0;n.subscribe(Pe(r,(function(n){r.next(e.call(t,n,o++))})))}))}function Ie(e,t,n){return void 0===n&&(n=1/0),ee(t)?Ie((function(n,r){return Me((function(e,o){return t(n,e,r,o)}))(Oe(e(n,r)))}),n):("number"==typeof t&&(n=t),Ce((function(t,r){return function(e,t,n,r,o,i,a,c){var s=[],u=0,l=0,d=!1,f=function(){!d||s.length||u||t.complete()},p=function(e){return u<r?h(e):s.push(e)},h=function(e){i&&t.next(e),u++;var c=!1;Oe(n(e,l++)).subscribe(Pe(t,(function(e){null==o||o(e),i?p(e):t.next(e)}),(function(){c=!0}),void 0,(function(){if(c)try{u--;for(var e=function(){var e=s.shift();a?function(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=!1);var i=t.schedule((function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()}),r);e.add(i)}(t,a,(function(){return h(e)})):h(e)};s.length&&u<r;)e();f()}catch(e){t.error(e)}})))};return e.subscribe(Pe(t,p,(function(){d=!0,f()}))),function(){null==c||c()}}(t,r,e,n)})))}var qe=Array.isArray;function Be(e){return Me((function(t){return function(e,t){return qe(t)?e.apply(void 0,V([],Y(t))):e(t)}(e,t)}))}var Ue=["addListener","removeListener"],Re=["addEventListener","removeEventListener"],Ne=["on","off"];function He(e,t,n,r){if(ee(n)&&(r=n,n=void 0),r)return He(e,t,n).pipe(Be(r));var o=Y(function(e){return ee(e.addEventListener)&&ee(e.removeEventListener)}(e)?Re.map((function(r){return function(o){return e[r](t,o,n)}})):function(e){return ee(e.addListener)&&ee(e.removeListener)}(e)?Ue.map(Fe(e,t)):function(e){return ee(e.on)&&ee(e.off)}(e)?Ne.map(Fe(e,t)):[],2),i=o[0],a=o[1];if(!i&&K(e))return Ie((function(e){return He(e,t,n)}))(Oe(e));if(!i)throw new TypeError("Invalid event target");return new Ae((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return i(t),function(){return a(t)}}))}function Fe(e,t){return function(n){return function(r){return e[n](t,r)}}}var $e=function(e){function t(t,n){return e.call(this)||this}return X(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(oe),ze={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var o=ze.delegate;return(null==o?void 0:o.setInterval)?o.setInterval.apply(o,V([e,t],Y(n))):setInterval.apply(void 0,V([e,t],Y(n)))},clearInterval:function(e){var t=ze.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Xe=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return X(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,o=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(o,r,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(o,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),ze.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&ze.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,r=!1;try{this.work(e)}catch(e){r=!0,n=e||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,r=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,re(r,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}($e),De={now:function(){return(De.delegate||Date).now()},delegate:void 0},Ge=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=De.now,e}(),We=new(function(e){function t(t,n){void 0===n&&(n=Ge.now);var r=e.call(this,t,n)||this;return r.actions=[],r._active=!1,r}return X(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ge))(Xe);var Ye=n(78),Ve={};Ve.styleTagTransform=f(),Ve.setAttributes=s(),Ve.insert=a().bind(null,"head"),Ve.domAPI=o(),Ve.insertStyleElement=l();t()(Ye.A,Ve);Ye.A&&Ye.A.locals&&Ye.A.locals;function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ze(r.key),r)}}function Ze(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Je(t)?t:t+""}var Ke=function(){return e=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t},t=[{key:"render",value:function(){this.renderUserCoordsWidgetElemnent()}},{key:"renderUserCoordsWidgetElemnent",value:function(){var e=document.createElement("div");e.classList.add("coords-popup-widget"),e.innerHTML='\n  <form id="coords-popup-form">\n    <label id="coords-popup-label" for="coords-popup-input">\n      <b>Что-то пошло не так(</b></br>\n      <p>\n      К сожалению, нам не удалось определить ваше местоположение,\n      пожалуйста, дайте разрешение на использование геолокации,\n      либо введите координаты вручную.\n      </p>\n\n      Широта и долгота через запятую\n    </label>\n    <input type="text" placeholder="XX.XXXXX, XX.XXXXX" id="coords-popup-input">\n    <button id="coords-popup-btn" disabled>Accept</button>\n  </form>\n  ',this.container.appendChild(e);var t,n,r=e.querySelector("button#coords-popup-btn");He(e.querySelector('input[type="text"]'),"input").pipe(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.length;if(0===n)throw new Error("list of properties cannot be empty.");return Me((function(t){for(var r=t,o=0;o<n;o++){var i=null==r?void 0:r[e[o]];if(void 0===i)return;r=i}return r}))}("target","value"),(t=300,void 0===n&&(n=We),Ce((function(e,r){var o=null,i=null,a=null,c=function(){if(o){o.unsubscribe(),o=null;var e=i;i=null,r.next(e)}};function s(){var e=a+t,i=n.now();if(i<e)return o=this.schedule(void 0,e-i),void r.add(o);c()}e.subscribe(Pe(r,(function(e){i=e,a=n.now(),o||(o=n.schedule(s,t),r.add(o))}),(function(){c(),r.complete()}),void 0,(function(){i=o=null})))}))),Me((function(e){return t=q(e.replaceAll(" ","").split(","),2),n=t[0],r=t[1],o=/^(\+|-)?(?:90(?:(?:\.0{1,6})?)|(?:[0-9]|[1-8][0-9])(?:(?:\.[0-9]{1,6})?))$/.test(n),i=/^(\+|-)?(?:180(?:(?:\.0{1,6})?)|(?:[0-9]|[1-9][0-9]|1[0-7][0-9])(?:(?:\.[0-9]{1,6})?))$/.test(r),o&&i;var t,n,r,o,i}))).subscribe((function(e){console.log(e),r.disabled=!e}))}}],t&&Qe(e.prototype,t),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}();var et=n(680),tt={};tt.styleTagTransform=f(),tt.setAttributes=s(),tt.insert=a().bind(null,"head"),tt.domAPI=o(),tt.insertStyleElement=l();t()(et.A,tt);et.A&&et.A.locals&&et.A.locals;function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(){rt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var i=t&&t.prototype instanceof b?t:b,a=Object.create(i.prototype),c=new C(r||[]);return o(a,"_invoke",{value:L(e,n,c)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=l;var f="suspendedStart",p="suspendedYield",h="executing",v="completed",y={};function b(){}function m(){}function g(){}var w={};u(w,a,(function(){return this}));var x=Object.getPrototypeOf,S=x&&x(x(P([])));S&&S!==n&&r.call(S,a)&&(w=S);var E=g.prototype=b.prototype=Object.create(w);function k(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function A(e,t){function n(o,i,a,c){var s=d(e[o],e,i);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==nt(l)&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):t.resolve(l).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,c)}))}c(s.arg)}var i;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return i=i?i.then(o,o):o()}})}function L(t,n,r){var o=f;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===v){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=T(c,r);if(s){if(s===y)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=h;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?v:p,u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function T(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function j(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(nt(t)+" is not iterable")}return m.prototype=g,o(E,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,s,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},k(A.prototype),u(A.prototype,c,(function(){return this})),t.AsyncIterator=A,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new A(l(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(E),u(E,s,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(j),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(s&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function ot(e,t,n,r,o,i,a){try{var c=e[i](a),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,at(r.key),r)}}function at(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nt(t)?t:t+""}var ct=function(){return e=function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!(t instanceof HTMLElement))throw new Error("".concat(t," is not HTMLelement"));this.container=t,this.videoMessageBtnOnClick=this.videoMessageBtnOnClick.bind(this),this.startStream=this.startStream.bind(this),this.resetRecorderBtnOnClick=this.resetRecorderBtnOnClick.bind(this);var n=document.querySelector("button#video-message-btn");n.addEventListener("click",this.videoMessageBtnOnClick),n.addEventListener("click",this.startStream)},t=[{key:"render",value:function(){this.renderVideoMessageWidgetElement()}},{key:"renderVideoMessageWidgetElement",value:function(){var e=document.createElement("div");e.classList.add("video-message-widget"),e.innerHTML='\n  <div class="video-container">\n    <video id="gum" playsline autoplay muted></video>\n    <video id="recorder" playsline controls loop></video>\n  </div>\n  <div class="video-message-widget-btns">\n    <button id="reset" class="video-message-widget-btn"></button>\n    <button id="stop" class="video-message-widget-btn"></button>\n    <button id="start" class="video-message-widget-btn"></button>\n  </div>\n\n  ',this.container.appendChild(e),e.querySelector("video#recorder").style.display="none";var t=e.querySelector("button#start"),n=e.querySelector("button#reset");t.addEventListener("click",this.startRecorderBtnOnClick),n.addEventListener("click",this.resetRecorderBtnOnClick)}},{key:"videoMessageBtnOnClick",value:function(e){var t=document.querySelector(".enable-widget");t&&(t.style.opacity="0",t.classList.remove("enable-widget"));var n=document.querySelector(".video-message-widget");n.classList.add("enable-widget"),document.querySelector(".common-message-widget-info").textContent="Video",setTimeout((function(){n.style.opacity="1"})),document.querySelectorAll(".common-widget-btn").forEach((function(e){e.classList.contains("disabled-btn")&&e.classList.remove("disabled-btn")})),e.target.classList.add("disabled-btn"),localStorage.setItem("messageMode","video")}},{key:"startStream",value:(r=rt().mark((function e(){var t,n;return rt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({video:!0});case 3:t=e.sent,e.next=10;break;case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return");case 10:(n=document.querySelector("video#gum")).srcObject=t,n.addEventListener("canplay",(function(){n.play()}));case 13:case"end":return e.stop()}}),e,null,[[0,6]])})),o=function(){var e=this,t=arguments;return new Promise((function(n,o){var i=r.apply(e,t);function a(e){ot(i,n,o,a,c,"next",e)}function c(e){ot(i,n,o,a,c,"throw",e)}a(void 0)}))},function(){return o.apply(this,arguments)})},{key:"startRecorderBtnOnClick",value:function(e){e.target.style.display="none";var t=document.querySelector("button#stop");t.style.display="block";var n=document.querySelector("video#gum"),r=n.srcObject,o=new MediaRecorder(r),i=[];o.addEventListener("dataavailable",(function(e){i.push(e.data)})),o.addEventListener("stop",(function(){var e=new Blob(i);n.style.display="none";var t=document.querySelector("video#recorder");t.style.display="block",t.src=URL.createObjectURL(e)})),t.addEventListener("click",(function(){t.style.display="none",document.querySelector("button#start").style.display="block",o.stop()})),o.start()}},{key:"resetRecorderBtnOnClick",value:function(e){document.querySelector("video#recorder").style.display="none",document.querySelector("video#gum").style.display="block"}}],t&&it(e.prototype,t),n&&it(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n,r,o}();localStorage.clear(),function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var t=e.coords,n=t.latitude,r=t.longitude;localStorage.setItem("coordinates",JSON.stringify({latitude:n,longitude:r}))}),(function(){}),{enableHighAccuracy:!0}),new w(document.body).render(),new Ke(document.body).render();var e=document.querySelector(".widget-container");new L(e).render();var t=document.querySelector(".common-message-widget-main");new _(t).render(),new ct(t).render();var n=document.querySelector(".cards-container");new $(n).render()}()})()})();